<!DOCTYPE html>
<html>
<head>
   <title>Nodes &gt; Tasks &gt; Stitch Align Mesh</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta name="description" content="Purpose &nbsp;To apply automatic image warping to remove Stereo3D vertical disparities, in order to automate VR stereo3D production. &nbsp;Equivalent to using Postiion-&gt;Align Mesh in Mi" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        height:auto; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { background: #404040; min-height: 59px }             
      #idheader h1 span { color: #FFF }     
      #idnav {
        text-align: right;
        width: 126px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_yellow.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }      
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
      a.hmanchor { display: inline-block; margin-top: -4em; padding-top: 4em }	  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "stitchalignmesh.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Stitch Align Mesh</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:bottom">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.html?stitchalignmesh.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      <a href="nodes.html">Nodes</a> &gt; <a href="tasks.html">Tasks</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Stitch Align Mesh</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="splitmovie.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="tasks.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="stichautocalibrate.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<h2 class="p_Heading2" style="text-align: center; page-break-after: avoid;"><span class="f_Heading2">&nbsp;</span></h2>
<h2 class="p_Heading2" style="page-break-after: avoid;"><span class="f_Heading2">Purpose</span></h2>
<p class="p_Normal">&nbsp;</p>
<p class="p_BodyText"><span class="f_BodyText">To apply automatic image warping to remove Stereo3D vertical disparities, in order to automate VR stereo3D production. </span></p>
<p class="p_BodyText"><span class="f_BodyText">Equivalent to using </span><span class="f_T_Menu">Postiion-&gt;Align Mesh </span><span class="f_BodyText">in Mistika VR, but in automated way by using Mistika Workflows .</span></p>
<p class="p_BodyText"><span class="f_BodyText">When this node is used, it should be the last step of the stitching process, &nbsp;typically after using stitching improvement nodes such as  </span><span class="f_T_Menu">Stitch Refiner. </span><span class="f_BodyText">This is because having a improved stitch will help this node to obtain better results.</span></p>
<p class="p_BodyText"><span class="f_BodyText">For more details, given a </span><span class="f_T_Emphasis">.rnd</span><span class="f_BodyText"> file describing an stereo3D pair (already stitched), this node will warp the resulting left and right images as needed in order to remove vertical miss-alignments (a same feature should always be at the same height in both eyes). Those vertical miss alignments are known to cause visual fatigue or even extreme discomfort (basically because we do not have one eye higher than the other, so only horizontal parallax is meaningful for the brain...). </span></p>
<p class="p_BodyText"><span class="f_BodyText">To achieve this, it will identify the pixel correspondences between the images of both eyes, and it will then warp the images as needed in order to force all the identified features to align vertically. </span></p>
<p class="p_BodyText"><span class="f_BodyText">The warped mesh pattern applied to the images can also be exported to other applications as a mesh file. </span></p>
<p class="p_BodyText"><span class="f_BodyText">If you want to automate the Align Mesh of incoming camera files automatically, an example workflow could be like this: </span></p>
<p class="p_BodyText"><span class="f_T_Menu">Folder </span><span class="f_BodyText">(or </span><span class="f_T_Menu">Watcher</span><span class="f_BodyText">) containing incoming camera footage-&gt; </span><span class="f_T_Menu">VR Input Bunches </span><span class="f_BodyText">-&gt; </span><span class="f_T_Menu">RNDfile </span><span class="f_BodyText">-(load rnd containing your VR preset &gt; </span><span class="f_T_Menu">Stitch Refine</span><span class="f_BodyText"> &gt; </span><span class="f_T_Menu">Stitch Align Mesh </span><span class="f_BodyText">-&gt; </span><span class="f_T_Menu">MistikaRender </span></p>
<p class="p_BodyText"><span class="f_BodyText">&nbsp;</span></p>
<p class="p_BodyText"><span class="f_Heading2">Inputs</span></p>
<p class="p_Normal"><span class="f_Heading3">rnd:</span> &nbsp;An .rnd file containing an stereo 3D pair of VR images (already stitched). (the initial<span class="f_T_Emphasis"> .rnd</span> files are normally created in Mistika VR or Mistika Boutique products. Then used as templates in Mistika Workflows by nodes supporting them)</p>
<p class="p_Normal">&nbsp;</p>
<h2 class="p_Heading2" style="page-break-after: avoid;"><span class="f_Heading2">Outputs</span></h2>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span class="f_Heading3">rnd:</span> The .rnd file with the warping &nbsp;applied. You can render it by connecting it to a <span class="f_T_Menu">MistikaRender </span>node.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<h2 class="p_Heading2" style="page-break-after: avoid;"><span class="f_Heading2">Standard properties</span></h2>
<p class="p_Normal">&nbsp;</p>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_Heading3">Object Properties</span></h3>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_Heading3"><a href="common-parameters.html#objectname" class="topiclink" title="Object Name">Object Name</a></span></h3>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_Heading3"><a href="common-parameters.html#color" class="topiclink" title="Color">Color</a></span></h3>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_Heading3"><a href="common-parameters.html#bypassenabled" class="topiclink" title="Color">Bypass</a></span></h3>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_Heading3"><a href="common-parameters.html#lock" class="topiclink">Lock</a></span></h3>
<p class="p_Normal">&nbsp;</p>
<h2 class="p_Heading2" style="page-break-after: avoid;"><span class="f_Heading2">Node specific properties</span></h2>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span class="f_Heading3">Export mesh:</span> It will export the warped mesh applied to the images to a separate file in Misitka<span class="f_T_Emphasis"> .vrmesh</span> format &nbsp;(at render time). For usage in other applications understanding this format..This provides a non destructive integration with other applications, as they can still load the original images and apply the mesh warp pattern created by this tool, rather than being forced to use intermediate renders.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">In the Mistika VR product, this is equivalent to the <span class="f_T_Menu">File -&gt; Export -&gt; Export mesh metadata </span>menu.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The <span class="f_T_Emphasis"> .vrmesh</span> format &nbsp;is described in this github project, also including libraries to &nbsp;read it: <a href="https://github.com/SGODeveloper/VRMeshLibrary" target="_blank" class="weblink">https://github.com/SGODeveloper/VRMeshLibrary</a></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span class="f_Heading3">Reference frame:</span> &nbsp;Reference frame number to use for the analysis. In some cases you may want to skip the first seconds where people are still preparing the camera</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<h3 class="p_Heading3" style="page-break-after: avoid;"><span class="f_T_Menu">&nbsp;</span></h3>
<p class="p_Normal">&nbsp;</p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">


  $(document).ready(function(){
    $(window).bind('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
	$('.hmanchor').css('padding-top', y+20);
      }
    });
    
    $(window).resize(); //trigger event for initially small displays
  });

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
